<!doctype html>
<html lang="ar" dir="rtl" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø£Ø­Ù…Ø¯ Ø§Ù„Ø´ÙŠØ® - Ù„Ù„Ø£Ø­Ø°ÙŠØ©</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&amp;display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: {
              light: '#6abe4b', // Ø£Ø®Ø¶Ø± ÙØ§ØªØ­
              DEFAULT: '#4a8c32', // Ø£Ø®Ø¶Ø± Ø§Ù„Ù„ÙˆØ¬Ùˆ Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠ
              dark: '#356624', // Ø£Ø®Ø¶Ø± ØºØ§Ù…Ù‚
              accent: '#f3f4f6'
            }
          }
        }
      }
    }
  </script>
  <style>
    body {
      box-sizing: border-box;
      font-family: 'Cairo', sans-serif;
      background-color: #121212;
      color: #ffffff;
    }
    
    /* Ø®Ù„ÙÙŠØ© Ø¹ØµØ±ÙŠØ© Ø±ÙŠØ§Ø¶ÙŠØ© */
    .brand-bg {
      background: radial-gradient(circle at top right, #1a3315 0%, #121212 40%),
                  radial-gradient(circle at bottom left, #0f220d 0%, #121212 40%);
      background-attachment: fixed;
    }

    /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ø²Ø¬Ø§Ø¬ Ø§Ù„Ù…Ø­Ø³Ù† */
    .glass-effect {
      background: rgba(30, 30, 30, 0.6);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(74, 140, 50, 0.3); /* Ø­Ø¯ÙˆØ¯ Ø®Ø¶Ø±Ø§Ø¡ Ø®ÙÙŠÙØ© */
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    }

    /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
    .btn-primary {
      background: linear-gradient(135deg, #4a8c32 0%, #356624 100%);
      box-shadow: 0 4px 15px rgba(74, 140, 50, 0.4);
      transition: all 0.3s ease;
      border: 1px solid #6abe4b;
    }
    .btn-primary:hover {
      background: linear-gradient(135deg, #6abe4b 0%, #4a8c32 100%);
      box-shadow: 0 0 20px rgba(74, 140, 50, 0.6);
      transform: translateY(-2px);
    }

    /* Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª */
    .product-card {
      background: linear-gradient(145deg, #1e1e1e 0%, #151515 100%);
      border: 1px solid #333;
      transition: all 0.3s ease;
    }
    .product-card:hover {
      border-color: #4a8c32;
      box-shadow: 0 10px 30px rgba(74, 140, 50, 0.15);
      transform: translateY(-5px);
    }

    /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª */
    .size-btn.available {
      background: #2d2d2d;
      color: #fff;
      border: 1px solid #444;
    }
    .size-btn.available:hover {
      border-color: #4a8c32;
    }
    .size-btn.unavailable {
      background: #1a1a1a;
      color: #444;
      cursor: not-allowed;
      border: 1px solid #222;
      text-decoration: line-through;
    }
    .size-btn.selected {
      background: #4a8c32;
      color: #fff;
      border-color: #6abe4b;
      box-shadow: 0 0 15px rgba(74, 140, 50, 0.5);
    }

    .modal-overlay {
      background: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(5px);
    }
    
    .product-image-box {
      background: radial-gradient(circle, #2a2a2a 0%, #151515 100%);
      border-bottom: 2px solid #4a8c32;
    }

    .animate-fade-in { animation: fadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .text-brand { color: #6abe4b; }
    
    /* ØªØ­Ø³ÙŠÙ† Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */
    .input-field {
      background: #2d2d2d;
      border: 1px solid #444;
      color: white;
    }
    .input-field:focus {
      border-color: #4a8c32;
      box-shadow: 0 0 0 2px rgba(74, 140, 50, 0.2);
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="h-full brand-bg min-h-screen overflow-auto">
  <div id="app" class="min-h-full w-full">
   
   <div id="home-page" class="min-h-full w-full">
    
    <header class="glass-effect p-4 sticky top-0 z-50 border-b border-gray-800">
     <div class="max-w-6xl mx-auto flex justify-between items-center">
      <div class="flex items-center gap-2">
        <div class="w-8 h-8 bg-brand rounded flex items-center justify-center font-bold text-lg">Ø´</div>
        <h1 id="store-title" class="text-xl md:text-2xl font-bold text-white tracking-wide">Ø£Ø­Ù…Ø¯ Ø§Ù„Ø´ÙŠØ®</h1>
      </div>
      <button onclick="showAdminLogin()" class="px-4 py-2 rounded-lg text-sm bg-white/5 hover:bg-white/10 transition-all border border-white/10"> ğŸ” Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© </button>
     </div>
    </header>

    <section class="relative h-72 md:h-96 overflow-hidden flex items-center justify-center">
     <div class="absolute w-96 h-96 bg-brand-dark rounded-full filter blur-3xl opacity-20 -top-10 -left-10"></div>
     <div class="absolute w-96 h-96 bg-brand rounded-full filter blur-3xl opacity-10 bottom-0 right-0"></div>
     
     <div class="text-center px-4 relative z-10">
      <h2 id="welcome-text" class="text-4xl md:text-6xl font-black mb-6 animate-fade-in leading-tight">
        Ø®Ø·ÙˆØ§ØªÙƒ ØªØ¨Ø¯Ø£ Ù…Ù† <span class="text-transparent bg-clip-text bg-gradient-to-r from-brand-light to-brand">Ù‡Ù†Ø§</span>
      </h2>
      <p class="text-lg md:text-xl text-gray-400 mb-8 max-w-2xl mx-auto">Ø£Ø­Ø¯Ø« ØªØ´ÙƒÙŠÙ„Ø§Øª Ø§Ù„Ø£Ø­Ø°ÙŠØ© Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ© ÙˆØ§Ù„ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠØ© Ø¨Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±</p>
      <button onclick="document.getElementById('categories-section').scrollIntoView({behavior: 'smooth'})" class="btn-primary text-white px-8 py-3 rounded-full font-bold text-lg">
        ØªØ³ÙˆÙ‚ Ø§Ù„Ø¢Ù† â†“
      </button>
     </div>
    </section>

    <section id="categories-section" class="max-w-6xl mx-auto px-4 py-12">
     <h3 class="text-2xl font-bold text-center mb-10 flex items-center justify-center gap-3">
       <span class="w-12 h-1 bg-brand rounded-full"></span>
       Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
       <span class="w-12 h-1 bg-brand rounded-full"></span>
     </h3>
     
     <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
       <button onclick="selectCategory('Ø±Ø¬Ø§Ù„ÙŠ')" class="product-card p-8 rounded-2xl group relative overflow-hidden">
         <div class="absolute top-0 right-0 w-24 h-24 bg-brand opacity-10 rounded-bl-full transition-transform group-hover:scale-150"></div>
         <div class="text-6xl mb-6 transform group-hover:-translate-y-2 transition-transform duration-300">ğŸ‘</div>
         <h4 class="text-2xl font-bold mb-2 text-white">Ø±Ø¬Ø§Ù„ÙŠ</h4>
         <p class="text-gray-400 text-sm">ØªØ´ÙƒÙŠÙ„Ø© Ù…Ù…ÙŠØ²Ø© Ù„Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª ÙˆØ§Ù„Ø±ÙŠØ§Ø¶Ø©</p>
         <div class="mt-4 text-brand font-bold text-sm">ØªØµÙØ­ (41-45) â†</div>
       </button>
       
       <button onclick="selectCategory('Ø­Ø±ÙŠÙ…ÙŠ')" class="product-card p-8 rounded-2xl group relative overflow-hidden">
         <div class="absolute top-0 right-0 w-24 h-24 bg-purple-500 opacity-10 rounded-bl-full transition-transform group-hover:scale-150"></div>
         <div class="text-6xl mb-6 transform group-hover:-translate-y-2 transition-transform duration-300">ğŸ‘ </div>
         <h4 class="text-2xl font-bold mb-2 text-white">Ø­Ø±ÙŠÙ…ÙŠ</h4>
         <p class="text-gray-400 text-sm">Ø£Ù†Ø§Ù‚Ø© ÙˆØ±Ø§Ø­Ø© Ù„ÙƒÙ„ ÙŠÙˆÙ…</p>
         <div class="mt-4 text-brand font-bold text-sm">ØªØµÙØ­ (37-41) â†</div>
       </button>
       
       <button onclick="selectCategory('Ø£Ø·ÙØ§Ù„ÙŠ')" class="product-card p-8 rounded-2xl group relative overflow-hidden">
         <div class="absolute top-0 right-0 w-24 h-24 bg-yellow-500 opacity-10 rounded-bl-full transition-transform group-hover:scale-150"></div>
         <div class="text-6xl mb-6 transform group-hover:-translate-y-2 transition-transform duration-300">ğŸ‘Ÿ</div>
         <h4 class="text-2xl font-bold mb-2 text-white">Ø£Ø·ÙØ§Ù„ÙŠ</h4>
         <p class="text-gray-400 text-sm">Ù…ÙˆØ¯ÙŠÙ„Ø§Øª Ù…Ø±ÙŠØ­Ø© Ù„Ù„Ø£Ø¨Ø·Ø§Ù„ Ø§Ù„ØµØºØ§Ø±</p>
         <div class="mt-4 text-brand font-bold text-sm">ØªØµÙØ­ (17-36) â†</div>
       </button>
     </div>
    </section>

    <section id="products-section" class="max-w-6xl mx-auto px-4 py-8 hidden min-h-screen">
     <div class="flex justify-between items-center mb-8 sticky top-20 z-40 py-4 bg-[#121212]/90 backdrop-blur-sm">
      <h3 id="category-title" class="text-2xl font-bold text-brand-light">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h3>
      <button onclick="goHome()" class="bg-gray-800 hover:bg-gray-700 px-5 py-2 rounded-full text-sm transition-all flex items-center gap-2">
        <span>âœ•</span> Ø¥ØºÙ„Ø§Ù‚
      </button>
     </div>
     
     <div id="products-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6">
       </div>
     
     <div id="no-products" class="text-center py-20 text-gray-600 hidden">
      <div class="text-7xl mb-4 opacity-20">ğŸ“¦</div>
      <p class="text-xl">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù…</p>
     </div>
    </section>
   </div>

   <div id="product-modal" class="fixed inset-0 z-[60] hidden modal-overlay flex items-center justify-center p-4">
    <div class="bg-[#1e1e1e] text-white rounded-2xl max-w-md w-full max-h-[90%] overflow-y-auto animate-fade-in shadow-2xl border border-gray-700">
     <div id="modal-product-image" class="product-image-box h-56 flex items-center justify-center text-8xl relative">
       <button onclick="closeProductModal()" class="absolute top-4 left-4 bg-black/50 hover:bg-black/80 w-8 h-8 rounded-full flex items-center justify-center text-white transition-all">âœ•</button>
       ğŸ‘Ÿ
     </div>
     
     <div class="p-6">
      <div class="flex justify-between items-start mb-2">
        <h3 id="modal-product-name" class="text-xl font-bold leading-tight"></h3>
        <span id="modal-product-price" class="text-xl font-bold text-brand-light bg-brand-dark/20 px-3 py-1 rounded-lg whitespace-nowrap"></span>
      </div>
      
      <div class="mb-6">
       <label class="block text-xs font-semibold text-gray-400 mb-3 uppercase tracking-wider">Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©</label>
       <div id="modal-sizes" class="flex flex-wrap gap-2">
         </div>
      </div>
      
      <div class="border-t border-gray-700 pt-6">
        <h4 class="font-bold mb-4 flex items-center gap-2">ğŸ“ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù„Ø¨</h4>
        <div id="order-form" class="space-y-3">
          <input type="text" id="customer-name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„" class="w-full px-4 py-3 rounded-xl input-field outline-none transition-all placeholder-gray-500">
          <input type="tel" id="customer-phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„" class="w-full px-4 py-3 rounded-xl input-field outline-none transition-all placeholder-gray-500">
          <textarea id="customer-address" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø¨Ø§Ù„ØªÙØµÙŠÙ„ (Ø§Ù„Ù…Ù†Ø·Ù‚Ø©ØŒ Ø§Ù„Ø´Ø§Ø±Ø¹ØŒ Ø±Ù‚Ù… Ø§Ù„Ù…Ù†Ø²Ù„)" rows="2" class="w-full px-4 py-3 rounded-xl input-field outline-none transition-all resize-none placeholder-gray-500"></textarea>
        </div>
      </div>

      <div class="flex gap-3 mt-8">
        <button onclick="submitOrder()" class="flex-1 btn-primary text-white py-4 rounded-xl font-bold text-lg hover:shadow-lg transition-all flex items-center justify-center gap-2">
           <span>ğŸ›’</span> ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨
        </button>
      </div>
     </div>
    </div>
   </div>

   <div id="admin-login-modal" class="fixed inset-0 z-[60] hidden modal-overlay flex items-center justify-center p-4">
    <div class="bg-[#1e1e1e] border border-gray-700 text-white rounded-2xl max-w-sm w-full p-8 animate-fade-in shadow-2xl">
     <div class="text-center mb-6">
       <div class="w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl">ğŸ”</div>
       <h3 class="text-xl font-bold">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h3>
     </div>
     <input type="password" id="admin-password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" class="w-full px-4 py-3 rounded-xl input-field outline-none mb-4 text-center tracking-widest">
     <p id="login-error" class="text-red-400 text-sm mb-4 hidden text-center bg-red-900/20 py-2 rounded">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©</p>
     <div class="flex gap-3">
       <button onclick="checkAdminPassword()" class="flex-1 btn-primary text-white py-3 rounded-xl font-bold">Ø¯Ø®ÙˆÙ„</button>
       <button onclick="closeAdminLogin()" class="flex-1 bg-gray-700 hover:bg-gray-600 rounded-xl font-bold transition-all">Ø¥Ù„ØºØ§Ø¡</button>
     </div>
    </div>
   </div>

   <div id="admin-page" class="min-h-full w-full hidden bg-[#121212]">
    <header class="glass-effect p-4 sticky top-0 z-50 border-b border-gray-800">
     <div class="max-w-6xl mx-auto flex justify-between items-center">
      <h1 class="text-xl font-bold flex items-center gap-2">
        <span class="bg-brand text-white px-3 py-1 rounded-md text-xs font-bold">ADMIN</span>
        Ù„ÙˆØ­Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©
      </h1>
      <button onclick="exitAdmin()" class="px-4 py-2 rounded-lg text-sm bg-gray-800 hover:bg-gray-700 transition-all"> Ø®Ø±ÙˆØ¬ ğŸšª </button>
     </div>
    </header>
    
    <div class="max-w-6xl mx-auto px-4 py-8">
     <div class="flex p-1 bg-gray-800 rounded-xl mb-8 w-fit mx-auto">
       <button onclick="showAdminTab('products')" id="tab-products" class="px-6 py-2 rounded-lg font-bold text-sm transition-all bg-brand text-white shadow-lg">ğŸ“¦ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</button>
       <button onclick="showAdminTab('orders')" id="tab-orders" class="px-6 py-2 rounded-lg font-bold text-sm transition-all text-gray-400 hover:text-white">ğŸ›’ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</button>
       <button onclick="showAdminTab('add')" id="tab-add" class="px-6 py-2 rounded-lg font-bold text-sm transition-all text-gray-400 hover:text-white">â• Ø¥Ø¶Ø§ÙØ©</button>
     </div>

     <div id="admin-products" class="admin-content animate-fade-in">
      <div id="admin-products-list" class="space-y-3"></div>
      <div id="admin-no-products" class="text-center py-12 text-gray-600 hidden">
       <div class="text-5xl mb-4 opacity-50">ğŸ“¦</div>
       <p>Ø§Ù„Ù…Ø®Ø²Ù† ÙØ§Ø±Øº!</p>
      </div>
     </div>

     <div id="admin-orders" class="admin-content hidden animate-fade-in">
      <div id="admin-orders-list" class="space-y-3"></div>
      <div id="admin-no-orders" class="text-center py-12 text-gray-600 hidden">
       <div class="text-5xl mb-4 opacity-50">ğŸ“‹</div>
       <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©</p>
      </div>
     </div>

     <div id="admin-add" class="admin-content hidden animate-fade-in">
      <div class="bg-[#1e1e1e] border border-gray-700 rounded-2xl p-6 max-w-lg mx-auto shadow-xl">
       <h3 class="text-xl font-bold mb-6 text-brand-light border-b border-gray-700 pb-4">Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h3>
       <div class="space-y-4">
        <div>
          <label class="block text-sm text-gray-400 mb-1">Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</label>
          <input type="text" id="new-product-name" placeholder="Ù…Ø«Ø§Ù„: Ø­Ø°Ø§Ø¡ Ù†Ø§ÙŠÙƒ Ø£Ø¨ÙŠØ¶" class="w-full px-4 py-3 rounded-xl input-field outline-none">
        </div>
        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-sm text-gray-400 mb-1">Ø§Ù„Ø³Ø¹Ø±</label>
            <input type="number" id="new-product-price" placeholder="00" class="w-full px-4 py-3 rounded-xl input-field outline-none">
          </div>
          <div>
            <label class="block text-sm text-gray-400 mb-1">Ø§Ù„ÙØ¦Ø©</label>
            <select id="new-product-category" class="w-full px-4 py-3 rounded-xl input-field outline-none appearance-none">
              <option value="Ø±Ø¬Ø§Ù„ÙŠ">Ø±Ø¬Ø§Ù„ÙŠ</option>
              <option value="Ø­Ø±ÙŠÙ…ÙŠ">Ø­Ø±ÙŠÙ…ÙŠ</option>
              <option value="Ø£Ø·ÙØ§Ù„ÙŠ">Ø£Ø·ÙØ§Ù„ÙŠ</option>
            </select>
          </div>
        </div>
        <div>
          <label class="block text-sm text-gray-400 mb-1">Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©</label>
          <input type="url" id="new-product-image" placeholder="https://..." class="w-full px-4 py-3 rounded-xl input-field outline-none text-left" dir="ltr">
        </div>
        <div>
          <label class="block text-sm text-brand-light mb-2 font-bold">Ø­Ø¯Ø¯ Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª Ø§Ù„Ù…ØªÙˆÙØ±Ø©:</label>
          <div id="size-selector" class="flex flex-wrap gap-2 p-3 bg-black/20 rounded-xl border border-gray-700"></div>
        </div>
        <button onclick="addNewProduct()" id="add-product-btn" class="w-full btn-primary text-white py-3 rounded-xl font-bold shadow-lg mt-4">Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬</button>
       </div>
      </div>
     </div>
    </div>
   </div>

   <div id="success-toast" class="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-600 text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-2 translate-y-[-150%] transition-transform z-[70] border border-green-400">
    <span class="text-xl">âœ…</span>
    <p id="toast-message" class="font-bold">ØªÙ…Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­</p>
   </div>

   <div id="confirm-delete-modal" class="fixed inset-0 z-[70] hidden modal-overlay flex items-center justify-center p-4">
    <div class="bg-[#1e1e1e] border border-gray-700 text-white rounded-2xl max-w-xs w-full p-6 animate-fade-in text-center">
     <div class="text-4xl mb-4">âš ï¸</div>
     <h3 class="text-lg font-bold mb-2">Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ</h3>
     <p id="confirm-delete-message" class="text-gray-400 mb-6 text-sm">Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡</p>
     <div class="flex gap-3">
       <button onclick="confirmDelete()" class="flex-1 bg-red-600 hover:bg-red-700 text-white py-2 rounded-lg font-bold transition-all">Ø­Ø°Ù</button>
       <button onclick="cancelDelete()" class="flex-1 bg-gray-700 hover:bg-gray-600 py-2 rounded-lg font-bold transition-all">ØªØ±Ø§Ø¬Ø¹</button>
     </div>
    </div>
   </div>

  </div>

  <script>
    // Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
    const defaultConfig = {
      store_name: 'Ø£Ø­Ù…Ø¯ Ø§Ù„Ø´ÙŠØ®',
      welcome_text: 'Ø§Ù„Ø£Ù†Ø§Ù‚Ø© ØªØ¨Ø¯Ø£ Ù…Ù† Ù‡Ù†Ø§',
      whatsapp_number: '01000000000',
    };

    let products = [];
    let orders = [];
    let currentCategory = '';
    let selectedProduct = null;
    let selectedSize = null;
    let selectedSizes = [];
    let deleteCallback = null;
    let isLoading = false;

    // ØªÙ‡ÙŠØ¦Ø© SDK
    const dataHandler = {
      onDataChanged(data) {
        products = data.filter(item => item.type === 'product');
        orders = data.filter(item => item.is_order === true);
        if (currentCategory) renderProducts(currentCategory);
        renderAdminProducts();
        renderAdminOrders();
      }
    };

    async function initApp() {
      if (window.elementSdk) {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange: (newConfig) => { /* Config update logic */ },
          mapToCapabilities: () => ({}), // Ù…Ø¨Ø³Ø· Ù„Ù‡Ø°Ø§ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
          mapToEditPanelValues: () => new Map()
        });
      }
      if (window.dataSdk) await window.dataSdk.init(dataHandler);
      updateSizeSelector();
    }

    // Ø§Ù„ØªÙ†Ù‚Ù„
    function selectCategory(category) {
      currentCategory = category;
      document.getElementById('products-section').classList.remove('hidden');
      document.getElementById('category-title').textContent = `${category}`;
      renderProducts(category);
      document.getElementById('products-section').scrollIntoView({ behavior: 'smooth' });
    }

    function goHome() {
      currentCategory = '';
      document.getElementById('products-section').classList.add('hidden');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
    function renderProducts(category) {
      const grid = document.getElementById('products-grid');
      const noProducts = document.getElementById('no-products');
      const categoryProducts = products.filter(p => p.category === category);
      
      if (categoryProducts.length === 0) {
        grid.innerHTML = '';
        noProducts.classList.remove('hidden');
        return;
      }
      
      noProducts.classList.add('hidden');
      grid.innerHTML = categoryProducts.map(product => `
        <div class="product-card rounded-xl overflow-hidden cursor-pointer group" onclick="openProductModal('${product.__backendId}')">
          <div class="product-image-box h-40 flex items-center justify-center text-4xl relative overflow-hidden">
            ${product.image ? `<img src="${product.image}" class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500" loading="lazy" onerror="this.style.display='none'; this.parentElement.innerHTML='ğŸ‘Ÿ';">` : 'ğŸ‘Ÿ'}
            <div class="absolute bottom-0 left-0 bg-brand text-white text-xs px-2 py-1 rounded-tr-lg font-bold">${product.price} Ø¬.Ù…</div>
          </div>
          <div class="p-4">
            <h4 class="font-bold text-sm truncate text-white mb-1 group-hover:text-brand-light transition-colors">${product.name}</h4>
            <p class="text-xs text-gray-500">Ø§Ù†Ù‚Ø± Ù„Ù„ØªÙØ§ØµÙŠÙ„</p>
          </div>
        </div>
      `).join('');
    }

    // Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†ØªØ¬
    function openProductModal(productId) {
      selectedProduct = products.find(p => p.__backendId === productId);
      if (!selectedProduct) return;
      
      selectedSize = null;
      document.getElementById('modal-product-name').textContent = selectedProduct.name;
      document.getElementById('modal-product-price').textContent = selectedProduct.price + ' Ø¬Ù†ÙŠÙ‡';
      
      const imageContainer = document.getElementById('modal-product-image');
      if (selectedProduct.image) {
        imageContainer.innerHTML = `<button onclick="closeProductModal()" class="absolute top-4 left-4 bg-black/50 hover:bg-black/80 w-8 h-8 rounded-full flex items-center justify-center text-white z-10 transition-all">âœ•</button><img src="${selectedProduct.image}" class="w-full h-full object-cover" onerror="this.style.display='none'; this.parentElement.innerText='ğŸ‘Ÿ';">`;
      } else {
         imageContainer.innerHTML = `<button onclick="closeProductModal()" class="absolute top-4 left-4 bg-black/50 hover:bg-black/80 w-8 h-8 rounded-full flex items-center justify-center text-white z-10 transition-all">âœ•</button>ğŸ‘Ÿ`;
      }
      
      const sizesContainer = document.getElementById('modal-sizes');
      const availableSizes = selectedProduct.sizes ? selectedProduct.sizes.split(',') : [];
      const allSizes = getSizesForCategory(selectedProduct.category);
      
      sizesContainer.innerHTML = allSizes.map(size => {
        const isAvailable = availableSizes.includes(size.toString());
        return `<button onclick="${isAvailable ? `selectOrderSize('${size}')` : ''}" class="size-btn px-4 py-2 rounded-lg font-bold text-sm transition-all ${isAvailable ? 'available' : 'unavailable'}" data-size="${size}">${size}</button>`;
      }).join('');
      
      document.getElementById('product-modal').classList.remove('hidden');
    }

    function closeProductModal() {
      document.getElementById('product-modal').classList.add('hidden');
      selectedProduct = null;
      selectedSize = null;
    }

    function selectOrderSize(size) {
      selectedSize = size;
      document.querySelectorAll('#modal-sizes .size-btn').forEach(btn => {
        btn.classList.remove('selected');
        if (btn.dataset.size === size) btn.classList.add('selected');
      });
    }

    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨
    async function submitOrder() {
      if (!selectedProduct || !selectedSize) return showToast('âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù‚Ø§Ø³');
      
      const name = document.getElementById('customer-name').value.trim();
      const phone = document.getElementById('customer-phone').value.trim();
      const address = document.getElementById('customer-address').value.trim();
      
      if (!name || !phone || !address) return showToast('âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø³ØªÙƒÙ…Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ');
      
      if (isLoading) return;
      isLoading = true;
      
      const orderData = {
        type: 'order', is_order: true,
        name: selectedProduct.name, price: selectedProduct.price,
        category: selectedProduct.category, selected_size: selectedSize,
        customer_name: name, customer_phone: phone, customer_address: address,
        order_date: new Date().toISOString(), image: selectedProduct.image || ''
      };
      
      if (window.dataSdk) {
        const result = await window.dataSdk.create(orderData);
        if (result.isOk) {
          showToast('âœ… ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ùƒ!');
          closeProductModal();
          const whatsapp = defaultConfig.whatsapp_number;
          const msg = `Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…ØªØ¬Ø±:\n${selectedProduct.name} - Ù…Ù‚Ø§Ø³ ${selectedSize}\nØ§Ù„Ø³Ø¹Ø±: ${selectedProduct.price}\n\nØ§Ù„Ø¹Ù…ÙŠÙ„: ${name}\nØª: ${phone}\nÙ…: ${address}`;
          window.open(`https://wa.me/${whatsapp}?text=${encodeURIComponent(msg)}`, '_blank');
        }
      }
      isLoading = false;
    }

    // Ø¥Ø¯Ø§Ø±Ø©
    function showAdminLogin() { document.getElementById('admin-login-modal').classList.remove('hidden'); }
    function closeAdminLogin() { document.getElementById('admin-login-modal').classList.add('hidden'); }
    function checkAdminPassword() {
      if (document.getElementById('admin-password').value === 'admin123') {
        closeAdminLogin();
        document.getElementById('home-page').classList.add('hidden');
        document.getElementById('admin-page').classList.remove('hidden');
        showAdminTab('products');
      } else {
        document.getElementById('login-error').classList.remove('hidden');
      }
    }
    function exitAdmin() {
      document.getElementById('admin-page').classList.add('hidden');
      document.getElementById('home-page').classList.remove('hidden');
      goHome();
    }

    function showAdminTab(tab) {
      document.querySelectorAll('.admin-content').forEach(el => el.classList.add('hidden'));
      document.querySelectorAll('#admin-page header + div > div:first-child button').forEach(el => {
        el.classList.remove('bg-brand', 'text-white', 'shadow-lg');
        el.classList.add('text-gray-400');
      });
      document.getElementById(`admin-${tab}`).classList.remove('hidden');
      const btn = document.getElementById(`tab-${tab}`);
      btn.classList.add('bg-brand', 'text-white', 'shadow-lg');
      btn.classList.remove('text-gray-400');
      
      if (tab === 'add') updateSizeSelector();
    }

    function renderAdminProducts() {
      const list = document.getElementById('admin-products-list');
      const no = document.getElementById('admin-no-products');
      if (products.length === 0) { list.innerHTML = ''; no.classList.remove('hidden'); return; }
      no.classList.add('hidden');
      list.innerHTML = products.map(p => `
        <div class="bg-[#1e1e1e] border border-gray-700 rounded-xl p-3 flex gap-3 items-center">
          <div class="w-12 h-12 bg-gray-800 rounded-lg flex items-center justify-center flex-shrink-0 overflow-hidden">
            ${p.image ? `<img src="${p.image}" class="w-full h-full object-cover">` : 'ğŸ‘Ÿ'}
          </div>
          <div class="flex-1 min-w-0">
            <h4 class="font-bold text-white truncate text-sm">${p.name}</h4>
            <p class="text-brand-light text-xs font-bold">${p.price} Ø¬.Ù…</p>
          </div>
          <button onclick="showDeleteConfirm('product', '${p.__backendId}')" class="w-8 h-8 flex items-center justify-center bg-red-900/30 text-red-500 rounded hover:bg-red-900/50 transition-colors">ğŸ—‘ï¸</button>
        </div>
      `).join('');
    }

    function renderAdminOrders() {
      const list = document.getElementById('admin-orders-list');
      const no = document.getElementById('admin-no-orders');
      if (orders.length === 0) { list.innerHTML = ''; no.classList.remove('hidden'); return; }
      no.classList.add('hidden');
      list.innerHTML = orders.map(o => `
        <div class="bg-[#1e1e1e] border-l-4 border-brand rounded-r-xl p-4 shadow-sm">
          <div class="flex justify-between items-start mb-2">
            <div>
              <h4 class="font-bold text-white">${o.name}</h4>
              <p class="text-brand text-sm">Ù…Ù‚Ø§Ø³ ${o.selected_size} | ${o.price} Ø¬.Ù…</p>
            </div>
            <button onclick="showDeleteConfirm('order', '${o.__backendId}')" class="text-red-500 hover:text-red-400">ğŸ—‘ï¸</button>
          </div>
          <div class="text-xs text-gray-400 bg-black/20 p-2 rounded">
            <p>ğŸ‘¤ ${o.customer_name}</p>
            <p>ğŸ“ ${o.customer_phone}</p>
            <p>ğŸ“ ${o.customer_address}</p>
          </div>
        </div>
      `).join('');
    }

    // Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬
    function getSizesForCategory(c) {
      if (c === 'Ø±Ø¬Ø§Ù„ÙŠ') return [41,42,43,44,45];
      if (c === 'Ø­Ø±ÙŠÙ…ÙŠ') return [37,38,39,40,41];
      if (c === 'Ø£Ø·ÙØ§Ù„ÙŠ') return Array.from({length:20}, (_,i)=>i+17);
      return [];
    }

    function updateSizeSelector() {
      const c = document.getElementById('new-product-category').value;
      const container = document.getElementById('size-selector');
      selectedSizes = [];
      container.innerHTML = getSizesForCategory(c).map(s => `
        <button type="button" onclick="toggleSize(${s}, this)" class="w-8 h-8 rounded bg-gray-700 text-xs font-bold transition-all hover:bg-gray-600">${s}</button>
      `).join('');
    }

    function toggleSize(s, btn) {
      const idx = selectedSizes.indexOf(s);
      if (idx > -1) {
        selectedSizes.splice(idx, 1);
        btn.classList.remove('bg-brand', 'text-white');
        btn.classList.add('bg-gray-700');
      } else {
        selectedSizes.push(s);
        btn.classList.add('bg-brand', 'text-white');
        btn.classList.remove('bg-gray-700');
      }
    }

    async function addNewProduct() {
      const name = document.getElementById('new-product-name').value;
      const price = document.getElementById('new-product-price').value;
      const cat = document.getElementById('new-product-category').value;
      const img = document.getElementById('new-product-image').value;
      
      if (!name || !price || selectedSizes.length === 0) return showToast('âš ï¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ø§Ù‚ØµØ©');
      
      document.getElementById('add-product-btn').innerText = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...';
      const data = { type: 'product', is_order: false, name, price, category: cat, image: img, sizes: selectedSizes.sort((a,b)=>a-b).join(',') };
      
      if (window.dataSdk) {
        await window.dataSdk.create(data);
        showToast('âœ… ØªÙ…!');
        document.getElementById('new-product-name').value = '';
        selectedSizes = []; updateSizeSelector();
        showAdminTab('products');
      }
      document.getElementById('add-product-btn').innerText = 'Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬';
    }

    // Ø§Ù„Ø­Ø°Ù
    function showDeleteConfirm(type, id) {
      document.getElementById('confirm-delete-modal').classList.remove('hidden');
      deleteCallback = async () => {
        const item = (type === 'product' ? products : orders).find(i => i.__backendId === id);
        if (item && window.dataSdk) await window.dataSdk.delete(item);
        showToast('ğŸ—‘ï¸ ØªÙ… Ø§Ù„Ø­Ø°Ù');
      };
    }
    function confirmDelete() { if (deleteCallback) deleteCallback(); cancelDelete(); }
    function cancelDelete() { document.getElementById('confirm-delete-modal').classList.add('hidden'); deleteCallback = null; }

    function showToast(msg) {
      const t = document.getElementById('success-toast');
      document.getElementById('toast-message').textContent = msg;
      t.style.transform = 'translate(-50%, 20px)';
      setTimeout(() => t.style.transform = 'translate(-50%, -150%)', 2500);
    }
    
    document.getElementById('new-product-category').addEventListener('change', updateSizeSelector);

    initApp();
  </script>
 </body>
</html>
